package dev.jason.mealsproject;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Order {

	public final float tax = 0.03f;
	private boolean isOrdering = true;
	List<Meal> meals;

	public Order() {
		meals = new ArrayList<Meal>();
	}

	private void orderQuestion() {
		System.out.println("What would you like to order?");
		System.out.println("1) Nuggets");
		System.out.println("2) Burger");
		System.out.println("3) Hot Dog");
		System.out.println("4) Done Ordering");
	}

	private Meal setMeal(int type) {
		Meal newmeal = new Meal();
		switch (type) {
		case 1:
			newmeal.type = "Nuggets";
			newmeal.price = 1.45f;
			break;
		case 2:
			newmeal.type = "Burger";
			newmeal.price = 3.50f;
			break;
		case 3:
			newmeal.type = "HotDog";
			newmeal.price = 1.20f;
			break;
		default:
			newmeal.type = "Invalid";
			newmeal.price = 0.0f;
			break;
		}
		return newmeal;
	}

	public void askOrderInput() {
		Scanner scan = new Scanner(System.in);
		do {

			this.orderQuestion();
			int response = scan.nextInt();
			if (response >= 1 && response <= 3) {
				meals.add(this.setMeal(response));
			} else if (response == 4) {
					this.isOrdering = false;
					break;
			} else {
				response = 0;
				System.out.println("That is not a valid order. Try again.");
			}
		} while (isOrdering);
		scan.close();
	}

	public void orderSummery() {
		for (Meal meal : meals) {
			System.out.println(meal.type);
			System.out.println(meal.price);
		}

		// TODO:: get total order price
		float totalprice = 0.0f;
		for (Meal meal : meals) {
			totalprice += meal.price;
		}
		System.out.println("The total before tax is: $" + totalprice);
		totalprice += totalprice * tax;

		System.out.println("The total after tax at " + this.tax + "% is: $" + totalprice);
		System.out.println(meals.size());
	}

}
